!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=1)}([function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(0);var n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("game-canvas"),this.context=this.canvas.getContext("2d")};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),e=a(this,l(t).call(this));var n={velocityX:0,velocityY:0,posX:0,posY:0},s=Object.assign({},n,o);return e.velocityX=s.velocityX,e.velocityY=s.velocityY,e.posX=s.posX,e.posY=s.posY,e}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),o=t,(n=[{key:"checkCollision",value:function(e){var t=e;switch(this.name){case"laser1":case"laser2":case"laser3":case"laser4":case"laser5":return!(!this||!t||this.posY>t.posY+t.height||this.posY<t.posY||this.posX+10<t.posX||this.posX>t.posX+t.width);case"red-laser":return!(!this||!t||this.posY>t.y+t.height||this.posY<t.y||this.posX+10<t.x||this.posX>t.x+t.width);case"player":return!(!this||!t||this.y>t.posY+t.height||this.y+this.height<t.posY||this.x+this.width<t.posX||this.x>t.posX+t.width)}}}])&&r(o.prototype,n),s&&r(o,s),t}(n);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e,o,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=f(this,y(t).call(this,o))).name="explosion",s.hp=64,s.img=n,s.sX=0,s.sY=0,s.sWidth=512,s.sHeight=512,s.height=50,s.width=80,s.scale=5,s.loot=e,s}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),o=t,(n=[{key:"draw",value:function(){var e=this.context,t=this.img,o=this.sX,n=this.sY,s=this.sWidth,i=this.sHeight,r=this.posX,a=this.posY,l=this.height,c=this.width,u=this.scale;this.hp>0&&e.drawImage(t,o,n,s,i,r-170,a-100,c*u,l*u)}}])&&p(o.prototype,n),s&&p(o,s),t}(u);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e,o,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=v(this,m(t).call(this,n))).canvas=e,s.canvas.width=450,s.canvas.height=700,s.context=s.canvas.getContext("2d"),s.img=new Image,s.img.src="".concat(o),s}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),o=t,(n=[{key:"draw",value:function(){var e=this.canvas,t=this.context,o=this.img,n=this.posY,s=this.velocityY;this.posY+=s,t.clearRect(0,0,450,700),t.drawImage(o,0,-700+n),t.drawImage(o,0,n),n>=e.height?this.posY=0:n<-700&&(this.posY=1)}}])&&g(o.prototype,n),s&&g(o,s),t}(u);var Y=function(){for(var e=[],t=0;t<8;t++)e.push(t);return e.map((function(e){return function(e){var t={velocityY:0};switch(e){case 0:t.velocityY=.1;break;case 1:t.velocityY=.3;break;case 2:t.velocityY=.1;break;case 3:t.velocityY=1;break;case 4:t.velocityY=.05;break;case 5:t.velocityY=.1;break;case 6:t.velocityY=.5;break;case 7:t.velocityY=1}return new x(document.getElementById("l"+e),"./src/images/background_layers/"+e+".png",t)}(e)}))};var S=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.background=Y(),this.tieFighterImg=new Image,this.tieFighterImg.src="./src/images/tie-advanced.png",this.playerImg=new Image,this.playerImg.src="./src/images/xwing.png",this.upgradeImg=new Image,this.upgradeImg.src="./src/images/upgrades/upgrades1.png",this.explosionImg=new Image,this.explosionImg.src="./src/images/explosions/explosion_sprite_sheet.png"};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e,o){var n,s,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,(n=!(i=P(t).call(this,o))||"object"!==j(i)&&"function"!=typeof i?E(s):i).status="active",n.name=e,n.canvas=document.getElementById("game-canvas"),n.ctx=n.canvas.getContext("2d"),n.img=new Image;var r=E(n).img;switch(e){case"red-laser":r.src="./src/images/weapons/red_laser.png",n.hp=1;break;case"laser1":r.src="./src/images/weapons/laser1.png",n.hp=2;break;case"laser2":r.src="./src/images/weapons/laser2.png",n.hp=4;break;case"laser3":r.src="./src/images/weapons/laser3.png",n.hp=8;break;case"laser4":r.src="./src/images/weapons/laser4.png",n.hp=16;break;case"laser5":r.src="./src/images/weapons/laser5.png",n.hp=32}return n}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),o=t,(n=[{key:"draw",value:function(){var e=this.ctx,t=this.img,o=this.posX,n=this.posY,s=this.velocityY;this.posY+=s,e.drawImage(t,o,n)}}])&&O(o.prototype,n),s&&O(o,s),t}(u);function X(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I="BACKGROUND_MUSIC",C="IMPACT",M="PLAYER_LASER",A="ENEMY_LASER",L="UPGRADE",R="TIE_EXPLODE",D=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,n;return t=e,(o=[{key:"initialize",value:function(){this.muted=!0,this.backgroundMusic=new Audio("./src/sounds/sw.mp3"),this.backgroundMusic.volume=.1,this.backgroundMusic.loop=!0,this.impact=new Audio("./src/sounds/impact.mp3"),this.impact.volume=.5,this.laserSound=new Audio("./src/sounds/Digital_SFX_Set/laser1.mp3"),this.enemyLaserSound=new Audio("./src/sounds/tie_fire_laser.mp3"),this.upgradeSound=new Audio("./src/sounds/upgrade_complete.mp3"),this.tieExplodeSound=new Audio("./src/sounds/tie_explode_short.mp3"),this.tieExplodeSound.volume=.2,this.setPlayMethods()}},{key:"playSound",value:function(e){switch(e){case I:this.backgroundMusic.playIfNotMuted();break;case C:this.impact.playIfNotMuted();break;case M:this.laserSound.playIfNotMuted();break;case A:this.enemyLaserSound.playIfNotMuted();break;case L:this.upgradeSound.playIfNotMuted();break;case R:this.tieExplodeSound.playIfNotMuted()}}},{key:"setPlayMethods",value:function(){var e=this;this.backgroundMusic.playIfNotMuted=function(){e.muted||this.play()},this.impact.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.laserSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.enemyLaserSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.upgradeSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.tieExplodeSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())}}}])&&X(t.prototype,o),n&&X(t,n),e}());function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(e,o){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=N(this,U(t).call(this,o))).name="TieFighter",n.weapon="red-laser",n.hp=5,n.loot=[{name:"upgrade",droprate:.04}],n.loot=n.loot[Math.floor(Math.random()*n.loot.length)];var s=Math.ceil(100*Math.random());return 100*n.loot.droprate>s?n.loot=n.loot.name:n.loot=null,n.img=e,n.posX=Math.floor(731*Math.random()),n.posY=Math.floor(-800*Math.random()),n.height=40,n.width=80,n.projectiles=[],n}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),o=t,(n=[{key:"draw",value:function(){var e=this.context,t=this.img,o=this.posX,n=this.posY,s=this.velocityY,i=this.height,r=this.width;e.drawImage(t,o,n,r,i),this.posY+=s}},{key:"fireWeapon",value:function(){var e;switch(D.playSound(A),this.weapon){case"red-laser":e=new T("red-laser",{velocityY:5,posX:Math.floor(this.posX+48),posY:Math.floor(this.posY-10)}),this.projectiles.push(e)}}}])&&B(o.prototype,n),s&&B(o,s),t}(u);function G(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.canvas=document.getElementById("ui-canvas"),this.context=this.canvas.getContext("2d"),this.playingStatus=document.getElementById("sound"),this.notPlayingStatus=document.getElementById("no-sound"),this.backgroundButton=document.getElementById("toggle-background-button"),this.instructionsOpenButton=document.getElementById("instructions-modal-open-button"),this.instructionsModalBackground=document.getElementById("instructions-modal-background"),this.instructionsModalContent=document.getElementById("instructions-modal-content"),this.setInstructionsModal(),this.setToggleBackgroundOnClick(),this.setToggleSoundOnClick()}var t,o,n;return t=e,(o=[{key:"draw",value:function(e){this.drawCoolDownConstant(e.player.projectileCoolDownConstant),this.drawHP(e.player.hp),this.drawScore(e.score),this.drawWavesLeft(e.lastWave,e.waveCount),this.drawFPS(e.fps)}},{key:"drawMuted",value:function(){var e=this.context;e.font="bold 30px Arial",e.fillStyle="red",e.fillText("MUTED! PRESS M TO UNMUTE",388,30)}},{key:"drawHP",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="red",t.fillText("HP: "+e,10,30)}},{key:"drawCoolDownConstant",value:function(e){var t=this.context;t.font="bold 20px Arial",t.fillStyle="white",t.fillText("Laser Cooldown: "+e,10,60)}},{key:"drawWavesLeft",value:function(e,t){var o=this.context;o.font="bold 20px Arial",o.fillStyle="white",o.fillText("Waves Remaining: "+(e-t),10,80)}},{key:"drawFPS",value:function(e){var t=this.context;t.font="bold 20px Arial",t.fillStyle="white",t.fillText("FPS: "+e,10,100)}},{key:"drawScore",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="white",t.fillText("Score: "+e,130,30)}},{key:"drawWin",value:function(e){var t=this.context;t.font="bold 80px Arial",t.fillStyle="green",t.fillText("YOU WIN!",230,280),t.font="bold 30px Arial",t.fillText("THE FORCE IS STRONG WITHIN YOU",150,330),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,155,410),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,470)}},{key:"drawLose",value:function(e){var t=this.context;t.font="bold 130px Arial",t.fillStyle="red",t.fillText("GAME OVER",10,250),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,150,330),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,400)}},{key:"drawPause",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="green",e.fillText("PAUSED",250,370),e.font="bold 50px Arial",e.fillText("PRESS P TO PLAY/PAUSE",110,420)}},{key:"drawReset",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="red",e.fillText("RESET",250,320)}},{key:"setToggleBackgroundOnClick",value:function(){var e=this.game;this.backgroundButton.addEventListener("click",(function(){e.toggleBackground()}))}},{key:"setToggleSoundOnClick",value:function(){var e=this,t=this.playingStatus,o=this.notPlayingStatus;t.addEventListener("click",(function(){t.classList.toggle("hidden"),o.classList.toggle("hidden"),e.game.sounds.muted=!0,e.game.sounds.backgroundMusic.pause()})),o.addEventListener("click",(function(){t.classList.toggle("hidden"),o.classList.toggle("hidden"),e.game.sounds.muted=!1,e.game.sounds.backgroundMusic.play()}))}},{key:"setInstructionsModal",value:function(){var e=this.game,t=this.instructionsModalBackground,o=this.instructionsOpenButton,n=this.instructionsModalContent;t.addEventListener("click",(function(){e.play(),t.classList.toggle("hidden"),n.classList.toggle("hidden")})),o.addEventListener("click",(function(){e.pause(),t.classList.toggle("hidden"),n.classList.toggle("hidden")}))}}])&&G(t.prototype,o),n&&G(t,n),e}();function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e,o,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=V(this,J(t).call(this,n))).name="upgrade",s.img=e,s.height=20,s.width=30,s.loot=o,s}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),o=t,(n=[{key:"drawUpgrade",value:function(){var e=this.context,t=this.img,o=this.posX,n=this.posY,s=this.velocityY,i=this.height,r=this.width;e.drawImage(t,o,n,r,i),this.posY+=s,t.onload=function(){e.drawImage(t,o,n,r,i)}}}])&&q(o.prototype,n),s&&q(o,s),t}(u);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=te(this,oe(t).call(this))).name="player",o.weapon="laser1",o.img=e,o.sounds=D,o.restart(),o.setKeyAndTouchHandlers(),o}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),o=t,(n=[{key:"restart",value:function(){this.hp=100,this.height=100,this.width=100,this.x=400,this.y=765,this.projectiles=[],this.projectileCoolDown=0,this.projectileCoolDownConstant=10,this.spacePressed=!1,this.upPressed=!1,this.downPressed=!1,this.rightPressed=!1,this.leftPressed=!1}},{key:"setKeyAndTouchHandlers",value:function(){this.keyUpHandler=this.keyUpHandler.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this),this.touchHandler=this.touchHandler.bind(this),this.touchEndHandler=this.touchEndHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler,!1),document.addEventListener("keydown",this.keyDownHandler,!1),document.addEventListener("touchstart",this.touchHandler),document.addEventListener("touchend",this.touchEndHandler),document.addEventListener("touchmove",this.touchHandler)}},{key:"keyUpHandler",value:function(e){"Space"!=e.code&&"Space"!=e.key||(this.spacePressed=!1),"Right"!=e.key&&"ArrowRight"!=e.key||(this.rightPressed=!1),"Left"!=e.key&&"ArrowLeft"!=e.key||(this.leftPressed=!1),"Up"!=e.key&&"ArrowUp"!=e.key||(this.upPressed=!1),"Down"!=e.key&&"ArrowDown"!=e.key||(this.downPressed=!1)}},{key:"keyDownHandler",value:function(e){e.preventDefault(),"Space"==e.code&&(this.spacePressed=!0),"Right"!=e.key&&"ArrowRight"!=e.key||(this.rightPressed=!0),"Left"!=e.key&&"ArrowLeft"!=e.key||(this.leftPressed=!0),"Up"!=e.key&&"ArrowUp"!=e.key||(this.upPressed=!0),"Down"!=e.key&&"ArrowDown"!=e.key||(this.downPressed=!0)}},{key:"touchHandler",value:function(e){e.touches&&(this.spacePressed=!0,2.32*e.touches[0].pageX<this.x?this.leftPressed=!0:this.rightPressed=!0,1.45*e.touches[0].pageY<this.y?this.upPressed=!0:this.downPressed=!0),e.preventDefault()}},{key:"touchEndHandler",value:function(e){e.preventDefault(),this.leftPressed=!1,this.rightPressed=!1,this.upPressed=!1,this.downPressed=!1,this.spacePressed=!1}},{key:"draw",value:function(){var e=this.context,t=this.x,o=this.y,n=this.height,s=this.width;this.spacePressed&&this.fireWeapon(),this.leftPressed&&(this.x>0?this.x-=15:this.x=750),this.rightPressed&&(this.x<700?this.x+=15:this.x=-50),this.upPressed&&this.y>0&&(this.y-=10),this.downPressed&&this.y<755&&(this.y+=10),e.drawImage(this.img,t,o,n,s)}},{key:"fireWeapon",value:function(){var e,t,o;if(this.projectileCoolDown<=0)switch(this.projectileCoolDown+=this.projectileCoolDownConstant,this.sounds.muted||(this.sounds.laserSound.currentTime=0,this.sounds.laserSound.play()),this.weapon){case"laser1":e=new T("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-1}),this.projectiles.push(e);break;case"laser2":e=new T("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new T("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser3":e=new T("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new T("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-10}),o=new T("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser4":e=new T("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser5":e=new T("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new T("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser6":e=new T("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new T("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),o=new T("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser7":e=new T("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser8":e=new T("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new T("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser9":e=new T("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new T("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),o=new T("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser10":e=new T("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser11":e=new T("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new T("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser12":e=new T("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new T("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),o=new T("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser13":e=new T("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser14":e=new T("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new T("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser15":e=new T("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new T("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),o=new T("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o)}else this.projectileCoolDown-=1}},{key:"upgrade",value:function(){var e=this.weapon,t=this.hp,o=this.projectileCoolDownConstant;switch(this.sounds.muted||(this.sounds.upgradeSound.currentTime=0,this.sounds.upgradeSound.play()),e){case"laser1":this.weapon="laser2";break;case"laser2":this.weapon="laser3";break;case"laser3":this.weapon="laser4";break;case"laser4":this.weapon="laser5";break;case"laser5":this.weapon="laser6";break;case"laser6":this.weapon="laser7";break;case"laser7":this.weapon="laser8";break;case"laser8":this.weapon="laser9";break;case"laser9":this.weapon="laser10";break;case"laser10":this.weapon="laser11";break;case"laser11":this.weapon="laser12";break;case"laser12":this.weapon="laser13";break;case"laser13":this.weapon="laser14";break;case"laser14":this.weapon="laser15";break;case"laser15":100===t?o>=5&&(this.projectileCoolDownConstant-=1):t<=90?this.hp+=10:t<=100&&(this.hp+=1)}}}])&&ee(o.prototype,n),s&&ee(o,s),t}(u);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=le(this,ce(t).call(this))).setAssets(),e.reset(),e.bindStuff(),e}var o,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),o=t,(n=[{key:"draw",value:function(){var e=this,t=this.background,o=this.clear,n=this.enemies,s=this.enemyLasers,i=this.explosions,r=this.images,a=this.lost,l=this.paused,c=this.player,u=this.score,h=this.sounds,p=this.upgrades,f=this.waveCount,y=this.won,d=this.ui;if(o(),!this.paused&&!this.lost&&!this.won&&(t.forEach((function(e){return e.draw()})),c.hp>0?c.draw():this.lost=!0,c.projectiles.forEach((function(t,o){if(t&&t.posY>=-5){var s=!1;n.forEach((function(a,l){if(a)if(t.checkCollision(a)){if(h.muted||h.impact.play(),a.hp-=1,t.hp-=1,t.hp<=0&&(c.projectiles[o]=null),a.hp<=0){var u=null;switch(a.name){case"TieFighter":u=new b(a.loot,{posX:a.posX,posY:a.posY,velocityY:1},r.explosionImg),h.muted||(h.tieExplodeSound.currentTime=0,h.tieExplodeSound.play()),i.push(u),e.score+=1}n[l]=null}}else s||(t.draw(),s=!0)}))}else c.projectiles[o]=null})),n.forEach((function(e,t){e&&(e.posY>=850?n[t]=null:(e.draw(),1===Math.ceil(1e3*Math.random())&&(e.fireWeapon(),s.push(e.projectiles[e.projectiles.length-1]))))})),s.forEach((function(t,o){if(t)if(t.checkCollision(c)){c.hp-=10;var n=new b(null,{posX:t.posX-20,posY:t.posY-10,velocityY:1},r.explosionImg);s[o]=null,h.muted||(h.tieExplodeSound.currentTime=0,h.tieExplodeSound.play()),e.explosions.push(n)}else t.posY<850?t.draw():s[o]=null})),i.forEach((function(t,o){if(t.hp>0)t.draw(),t.sX<=3584?t.sX+=512:t.sX=0,t.sY<=3584?t.sY+=512:t.sY=0,t.hp-=1;else if(t.hp<=0){if(t.loot){var n=new Z(r.upgradeImg,e.loot,{posX:t.posX,posY:t.posY,velocityY:1});p.push(n)}i[o]=null}})),p.forEach((function(e,t){c.checkCollision(e)?(c.upgrade(),p[t]=null):e&&e.posY<850?e.drawUpgrade():p[t]=null})),0===n.length||n.every((function(e){return null===e})))){var w=3;switch(this.wave){case this.waveCount>=10&&this.waveCount<20:w=5;break;case this.waveCount>=20&&this.waveCount<29:w=6;break;case this.waveCount>=29:w=20,this.wave+=20;break;case this.wave>50:w=10}this.wave+=5,this.waveCount+=1,this.enemies=re(Array(this.wave).keys()).map((function(){return new F(r.tieFighterImg,{velocityY:Math.ceil(Math.random()*w)})}))}this.filterNulls(),this.paused||this.won||this.lost?this.fps=60:performance.now()-this.then>500&&(this.fps=60-(Math.floor(performance.now()-this.then)-500),this.fps<0&&(this.fps=0),this.then=performance.now()),d.draw(this),l||d.draw(this),f>=30&&(this.won=!0),y&&d.drawWin(u),a&&d.drawLose(u),!l||a||y||d.drawPause(),h.muted&&d.drawMuted(),requestAnimationFrame(this.draw)}},{key:"filterNulls",value:function(){this.player.projectiles=this.player.projectiles.filter((function(e){return e})),this.enemyLasers=this.enemyLasers.filter((function(e){return e})),this.enemies=this.enemies.filter((function(e){return e})),this.explosions=this.explosions.filter((function(e){return e})),this.upgrades=this.upgrades.filter((function(e){return e}))}},{key:"clear",value:function(){var e=this.canvas,t=this.context,o=this.ui;t.clearRect(0,0,e.width,e.height),o.context.clearRect(0,0,e.width,e.height)}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"setAssets",value:function(){D.initialize(),this.sounds=D,this.images=new S,this.background=this.images.background,this.ui=new K(this),this.fps=0,this.then=performance.now(),this.setCanvasResolution()}},{key:"setCanvasResolution",value:function(){var e=this;this.images.playerImg.onload=function(){var t=e.canvas,o=this.naturalWidth,n=this.naturalHeight;t.width=o,t.height=n,(t=document.getElementById("ui-canvas")).width=o,t.height=n,e.draw()}}},{key:"bindStuff",value:function(){this.clear=this.clear.bind(this),this.draw=this.draw.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler,!1)}},{key:"reset",value:function(){this.player=new se(this.images.playerImg),this.score=0,this.wave=0,this.waveCount=0,this.lastWave=30,this.lost=!1,this.paused=!1,this.won=!1,this.enemies=[],this.enemyLasers=[],this.explosions=[],this.upgrades=[]}},{key:"keyDownHandler",value:function(e){var t=this.sounds,o=this.won,n=this.lost,s=this.ui,i=s.playingStatus,r=s.notPlayingStatus;e.preventDefault(),"r"==e.key||"R"==e.key?(this.player=new se(this.images.playerImg),this.reset()):"p"==e.key||"P"==e.key?o||n||(this.paused=!this.paused):"m"==e.key||"M"==e.key?t.muted?(i.classList.toggle("hidden"),r.classList.toggle("hidden"),t.backgroundMusic.play(),this.sounds.muted=!1):(r.classList.toggle("hidden"),i.classList.toggle("hidden"),t.backgroundMusic.pause(),this.sounds.muted=!0):"t"!=e.key&&"T"!=e.key||this.toggleBackground()}},{key:"toggleBackground",value:function(){0===this.background.length?this.background=this.images.background:this.background=[]}}])&&ae(o.prototype,n),s&&ae(o,s),t}(n);document.addEventListener("DOMContentLoaded",(function(){new he}))}]);
//# sourceMappingURL=main.js.map