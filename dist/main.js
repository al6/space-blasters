!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("game-canvas"),this.context=this.canvas.getContext("2d")};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,o,r=c(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,u),e=r.call(this);var n={velocityX:0,velocityY:0,posX:0,posY:0},o=Object.assign({},n,t);return e.velocityX=o.velocityX,e.velocityY=o.velocityY,e.posX=o.posX,e.posY=o.posY,e}return t=u,(n=[{key:"checkCollision",value:function(e){var t=e;if(!this||!t)return!1;switch(this.name){case"laser1":case"laser2":case"laser3":case"laser4":case"laser5":return!(this.posY>t.posY+t.height||this.posY<t.posY||this.posX+10<t.posX||this.posX>t.posX+t.width);case"red-laser":return!(this.posY>t.y+t.height||this.posY<t.y||this.posX+10<t.x||this.posX>t.x+t.width);case"player":return!(this.y>t.posY+t.height||this.y+this.height<t.posY||this.x+this.width<t.posX||this.x>t.posX+t.width)}}}])&&s(t.prototype,n),o&&s(t,o),u}(o);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,o,r=d(i);function i(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,t)).name="explosion",o.hp=64,o.img=n,o.sX=0,o.sY=0,o.sWidth=512,o.sHeight=512,o.height=50,o.width=80,o.scale=5,o.loot=e,o}return t=i,(n=[{key:"draw",value:function(){var e=this.context,t=this.img,n=this.sX,o=this.sY,r=this.sWidth,i=this.sHeight,s=this.posX,a=this.posY,c=this.height,u=this.width,l=this.scale;this.hp>0&&e.drawImage(t,n,o,r,i,s-170,a-100,u*l,c*l)}}])&&h(t.prototype,n),o&&h(t,o),i}(p);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Y(e);if(t){var r=Y(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,o,r=x(i);function i(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,n)).canvas=e,o.canvas.width=450,o.canvas.height=700,o.context=o.canvas.getContext("2d"),o.img=new Image,o.img.src="".concat(t),o}return t=i,(n=[{key:"draw",value:function(){var e=this.canvas,t=this.context,n=this.img,o=this.posY,r=this.velocityY;this.posY+=r,t.clearRect(0,0,450,700),t.drawImage(n,0,-700+o),t.drawImage(n,0,o),o>=e.height?this.posY=0:o<-700&&(this.posY=1)}}])&&w(t.prototype,n),o&&w(t,o),i}(p);var O=function(){for(var e=[],t=0;t<8;t++)e.push(t);return e.map((function(e){return function(e){var t={velocityY:0};switch(e){case 0:t.velocityY=.1;break;case 1:t.velocityY=.3;break;case 2:t.velocityY=.1;break;case 3:t.velocityY=1;break;case 4:t.velocityY=.05;break;case 5:t.velocityY=.1;break;case 6:t.velocityY=.5;break;case 7:t.velocityY=1}return new j(document.getElementById("l"+e),"./src/images/background_layers/"+e+".png",t)}(e)}))};var P=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.background=O(),this.tieFighterImg=new Image,this.tieFighterImg.src="./src/images/tie-advanced.png",this.playerImg=new Image,this.playerImg.src="./src/images/xwing.png",this.upgradeImg=new Image,this.upgradeImg.src="./src/images/upgrades/upgrades1.png",this.explosionImg=new Image,this.explosionImg.src="./src/images/explosions/explosion_sprite_sheet.png"};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=X(e);if(t){var r=X(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,e);var t,n,o,r=T(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t)).status="active",n.name=e,n.canvas=document.getElementById("game-canvas"),n.ctx=n.canvas.getContext("2d"),n.img=new Image;var o=I(n).img;switch(e){case"red-laser":o.src="./src/images/weapons/red_laser.png",n.hp=1;break;case"laser1":o.src="./src/images/weapons/laser1.png",n.hp=2;break;case"laser2":o.src="./src/images/weapons/laser2.png",n.hp=4;break;case"laser3":o.src="./src/images/weapons/laser3.png",n.hp=8;break;case"laser4":o.src="./src/images/weapons/laser4.png",n.hp=16;break;case"laser5":o.src="./src/images/weapons/laser5.png",n.hp=32}return n}return t=i,(n=[{key:"draw",value:function(){var e=this.ctx,t=this.img,n=this.posX,o=this.posY,r=this.velocityY;this.posY+=r,e.drawImage(t,n,o)}}])&&_(t.prototype,n),o&&_(t,o),i}(p);function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var D="BACKGROUND_MUSIC",L="IMPACT",N="PLAYER_LASER",B="ENEMY_LASER",H="UPGRADE",U="TIE_EXPLODE",W=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"initialize",value:function(){this.muted=!0,this.backgroundMusic=new Audio("./src/sounds/sw.mp3"),this.backgroundMusic.volume=.1,this.backgroundMusic.loop=!0,this.impact=new Audio("./src/sounds/impact.mp3"),this.impact.volume=.5,this.laserSound=new Audio("./src/sounds/Digital_SFX_Set/laser1.mp3"),this.enemyLaserSound=new Audio("./src/sounds/tie_fire_laser.mp3"),this.upgradeSound=new Audio("./src/sounds/upgrade_complete.mp3"),this.tieExplodeSound=new Audio("./src/sounds/tie_explode_short.mp3"),this.tieExplodeSound.volume=.2,this.setPlayMethods()}},{key:"playSound",value:function(e){switch(e){case D:this.backgroundMusic.playIfNotMuted();break;case L:this.impact.playIfNotMuted();break;case N:this.laserSound.playIfNotMuted();break;case B:this.enemyLaserSound.playIfNotMuted();break;case H:this.upgradeSound.playIfNotMuted();break;case U:this.tieExplodeSound.playIfNotMuted()}}},{key:"setPlayMethods",value:function(){var e=this;this.backgroundMusic.playIfNotMuted=function(){e.muted||this.play()},this.impact.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.laserSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.enemyLaserSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.upgradeSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())},this.tieExplodeSound.playIfNotMuted=function(){e.muted||(this.currentTime=0,this.play())}}}])&&M(t.prototype,n),o&&M(t,o),e}());function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=V(e);if(t){var r=V(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(i,e);var t,n,o,r=z(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t)).name="TieFighter",n.weapon="red-laser",n.hp=5,n.loot=[{name:"upgrade",droprate:.04}],n.loot=n.loot[Math.floor(Math.random()*n.loot.length)];var o=Math.ceil(100*Math.random());return 100*n.loot.droprate>o?n.loot=n.loot.name:n.loot=null,n.img=e,n.posX=Math.floor(731*Math.random()),n.posY=Math.floor(-800*Math.random()),n.height=40,n.width=80,n.projectiles=[],n}return t=i,(n=[{key:"draw",value:function(){var e=this.context,t=this.img,n=this.posX,o=this.posY,r=this.velocityY,i=this.height,s=this.width;e.drawImage(t,n,o,s,i),this.posY+=r}},{key:"fireWeapon",value:function(){var e;switch(W.playSound(B),this.weapon){case"red-laser":e=new C("red-laser",{velocityY:5,posX:Math.floor(this.posX+48),posY:Math.floor(this.posY-10)}),this.projectiles.push(e)}}}])&&G(t.prototype,n),o&&G(t,o),i}(p);function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.canvas=document.getElementById("ui-canvas"),this.context=this.canvas.getContext("2d"),this.playingStatus=document.getElementById("sound"),this.notPlayingStatus=document.getElementById("no-sound"),this.backgroundButton=document.getElementById("toggle-background-button"),this.instructionsOpenButton=document.getElementById("instructions-modal-open-button"),this.instructionsModalBackground=document.getElementById("instructions-modal-background"),this.instructionsModalContent=document.getElementById("instructions-modal-content"),this.setInstructionsModal(),this.setToggleBackgroundOnClick(),this.setToggleSoundOnClick()}var t,n,o;return t=e,(n=[{key:"draw",value:function(){var e=this.game,t=e.won,n=e.lost,o=e.paused,r=e.score,i=e.sounds,s=e.player,a=e.lastWave,c=e.waveCount,u=e.fps,l=e.playing;this.drawCoolDownConstant(s.projectileCoolDownConstant),this.drawHP(s.hp),this.drawScore(r),this.drawWavesLeft(a,c),this.drawFPS(u),t&&this.drawWin(r),n&&this.drawLose(r),!o||n||t||this.drawPause(),i.muted&&this.drawMuted(),l||this.drawBeginInstructions()}},{key:"drawMuted",value:function(){var e=this.context;e.font="bold 30px Arial",e.fillStyle="red",e.fillText("MUTED! PRESS M TO UNMUTE",388,30)}},{key:"drawBeginInstructions",value:function(){var e=this.context;e.font="80px Arial",e.fillStyle="green",e.fillText("PRESS ANY KEY",100,370),e.fillText("TO START PLAYING",35,520)}},{key:"drawHP",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="red",t.fillText("HP: "+e,10,30)}},{key:"drawCoolDownConstant",value:function(e){var t=this.context;t.font="bold 20px Arial",t.fillStyle="white",t.fillText("Laser Cooldown: "+e,10,60)}},{key:"drawWavesLeft",value:function(e,t){var n=this.context;n.font="bold 20px Arial",n.fillStyle="white",n.fillText("Waves Remaining: "+(e-t),10,80)}},{key:"drawFPS",value:function(e){var t=this.context;t.font="bold 20px Arial",t.fillStyle="white",t.fillText("FPS: "+e,10,100)}},{key:"drawScore",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="white",t.fillText("Score: "+e,130,30)}},{key:"drawWin",value:function(e){var t=this.context;t.font="bold 80px Arial",t.fillStyle="green",t.fillText("YOU WIN!",230,310),t.font="bold 30px Arial",t.fillText("THE FORCE IS STRONG WITHIN YOU",150,370),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,155,430),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,500)}},{key:"drawLose",value:function(e){var t=this.context;t.font="bold 130px Arial",t.fillStyle="red",t.fillText("GAME OVER",10,350),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,150,430),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,500)}},{key:"drawPause",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="green",e.fillText("PAUSED",230,370),e.font="bold 50px Arial",e.fillText("PRESS P TO PLAY/PAUSE",110,520)}},{key:"drawReset",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="red",e.fillText("RESET",250,320)}},{key:"setToggleBackgroundOnClick",value:function(){var e=this.game;this.backgroundButton.addEventListener("click",(function(){e.toggleBackground()}))}},{key:"setToggleSoundOnClick",value:function(){var e=this,t=this.playingStatus,n=this.notPlayingStatus;t.addEventListener("click",(function(){t.classList.toggle("hidden"),n.classList.toggle("hidden"),e.game.sounds.muted=!0,e.game.sounds.backgroundMusic.pause()})),n.addEventListener("click",(function(){t.classList.toggle("hidden"),n.classList.toggle("hidden"),e.game.sounds.muted=!1,e.game.sounds.backgroundMusic.play()}))}},{key:"setInstructionsModal",value:function(){var e=this.game,t=this.instructionsModalBackground,n=this.instructionsOpenButton,o=this.instructionsModalContent;t.addEventListener("click",(function(){t.classList.toggle("hidden"),o.classList.toggle("hidden")})),n.addEventListener("click",(function(){e.playing&&e.pause(),t.classList.toggle("hidden"),o.classList.toggle("hidden")}))}}])&&J(t.prototype,n),o&&J(t,o),e}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re(e);if(t){var r=re(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(i,e);var t,n,o,r=ne(i);function i(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,n)).name="upgrade",o.img=e,o.height=20,o.width=30,o.loot=t,o}return t=i,(n=[{key:"drawUpgrade",value:function(){var e=this.context,t=this.img,n=this.posX,o=this.posY,r=this.velocityY,i=this.height,s=this.width;e.drawImage(t,n,o,s,i),this.posY+=r,t.onload=function(){e.drawImage(t,n,o,s,i)}}}])&&ee(t.prototype,n),o&&ee(t,o),i}(p);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=fe(e);if(t){var r=fe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(i,e);var t,n,o,r=ue(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),he(pe(t=r.call(this)),"keyUpHandler",(function(e){"Space"!=e.code&&"Space"!=e.key||(t.spacePressed=!1),"Right"!=e.key&&"ArrowRight"!=e.key||(t.rightPressed=!1),"Left"!=e.key&&"ArrowLeft"!=e.key||(t.leftPressed=!1),"Up"!=e.key&&"ArrowUp"!=e.key||(t.upPressed=!1),"Down"!=e.key&&"ArrowDown"!=e.key||(t.downPressed=!1)})),he(pe(t),"keyDownHandler",(function(e){e.preventDefault(),"Space"==e.code&&(t.spacePressed=!0),"Right"!=e.key&&"ArrowRight"!=e.key||(t.rightPressed=!0),"Left"!=e.key&&"ArrowLeft"!=e.key||(t.leftPressed=!0),"Up"!=e.key&&"ArrowUp"!=e.key||(t.upPressed=!0),"Down"!=e.key&&"ArrowDown"!=e.key||(t.downPressed=!0)})),t.name="player",t.weapon="laser1",t.img=e,t.sounds=W,t.restart(),t.setKeyAndTouchHandlers(),t}return t=i,(n=[{key:"restart",value:function(){this.hp=100,this.height=100,this.width=100,this.x=400,this.y=765,this.projectiles=[],this.projectileCoolDown=0,this.projectileCoolDownConstant=10,this.spacePressed=!1,this.upPressed=!1,this.downPressed=!1,this.rightPressed=!1,this.leftPressed=!1}},{key:"setKeyAndTouchHandlers",value:function(){document.addEventListener("keyup",this.keyUpHandler,!1),document.addEventListener("keydown",this.keyDownHandler,!1),document.addEventListener("touchstart",this.touchHandler),document.addEventListener("touchend",this.touchEndHandler),document.addEventListener("touchmove",this.touchHandler)}},{key:"draw",value:function(){var e=this.context,t=this.x,n=this.y,o=this.height,r=this.width;this.spacePressed&&this.fireWeapon(),this.leftPressed&&(this.x>0?this.x-=15:this.x=750),this.rightPressed&&(this.x<700?this.x+=15:this.x=-50),this.upPressed&&this.y>0&&(this.y-=10),this.downPressed&&this.y<755&&(this.y+=10),e.drawImage(this.img,t,n,o,r)}},{key:"fireWeapon",value:function(){var e,t,n;if(this.projectileCoolDown<=0)switch(this.projectileCoolDown+=this.projectileCoolDownConstant,this.sounds.muted||(this.sounds.laserSound.currentTime=0,this.sounds.laserSound.play()),this.weapon){case"laser1":e=new C("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-1}),this.projectiles.push(e);break;case"laser2":e=new C("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new C("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser3":e=new C("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new C("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-10}),n=new C("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(n);break;case"laser4":e=new C("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser5":e=new C("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new C("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser6":e=new C("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new C("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),n=new C("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(n);break;case"laser7":e=new C("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser8":e=new C("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new C("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser9":e=new C("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new C("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),n=new C("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(n);break;case"laser10":e=new C("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser11":e=new C("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new C("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser12":e=new C("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new C("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),n=new C("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(n);break;case"laser13":e=new C("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser14":e=new C("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new C("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser15":e=new C("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new C("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),n=new C("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(n)}else this.projectileCoolDown-=1}},{key:"upgrade",value:function(){var e=this.weapon,t=this.hp,n=this.projectileCoolDownConstant;switch(this.sounds.muted||"laser15"===e||(this.sounds.upgradeSound.currentTime=0,this.sounds.upgradeSound.play()),e){case"laser1":this.weapon="laser2";break;case"laser2":this.weapon="laser3";break;case"laser3":this.weapon="laser4";break;case"laser4":this.weapon="laser5";break;case"laser5":this.weapon="laser6";break;case"laser6":this.weapon="laser7";break;case"laser7":this.weapon="laser8";break;case"laser8":this.weapon="laser9";break;case"laser9":this.weapon="laser10";break;case"laser10":this.weapon="laser11";break;case"laser11":this.weapon="laser12";break;case"laser12":this.weapon="laser13";break;case"laser13":this.weapon="laser14";break;case"laser14":this.weapon="laser15";break;case"laser15":100===t?n>=5&&(this.projectileCoolDownConstant-=1,this.sounds.muted||"laser15"===e||(this.sounds.upgradeSound.currentTime=0,this.sounds.upgradeSound.play())):t<=90?this.hp+=10:t<=100&&(this.hp+=1)}}}])&&ae(t.prototype,n),o&&ae(t,o),i}(p);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Se(e);if(t){var r=Se(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(i,e);var t,n,o,r=we(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ye(xe(e=r.call(this)),"draw",(function(){var t=xe(e),n=t.enemies,o=t.enemyLasers,r=t.explosions,i=t.images,s=t.player,a=t.sounds,c=t.upgrades,u=t.ui,l=t.filterNulls,p=t.ifWonOrLostStopGameAndPrintScore,f=t.startNextWave,h=t.clearGameAndUiCanvasForNextFramePainting,y=t.keepDrawingBackgroundLayers,d=t.ifNotPausedAndAliveDrawPlayer,g=t.loopAnimationFramesAtDesiredFps;y(),p(),h(),d(),u.draw(xe(e)),e.paused||e.lost||e.won||!e.playing||(s.projectiles.forEach((function(t,o){if(t&&t.posY>=-5){var c=!1;n.forEach((function(u,l){if(u)if(t.checkCollision(u)){if(a.muted||a.impact.play(),u.hp-=1,t.hp-=1,t.hp<=0&&(s.projectiles[o]=null),u.hp<=0){var p=null;switch(u.name){case"TieFighter":p=new m(u.loot,{posX:u.posX,posY:u.posY,velocityY:1},i.explosionImg),a.muted||(a.tieExplodeSound.currentTime=0,a.tieExplodeSound.play()),r.push(p),e.score+=1}n[l]=null}}else c||(t.draw(),c=!0)}))}else s.projectiles[o]=null})),n.forEach((function(e,t){e&&(e.posY>=850?n[t]=null:(e.draw(),1===Math.ceil(1e3*Math.random())&&(e.fireWeapon(),o.push(e.projectiles[e.projectiles.length-1]))))})),o.forEach((function(t,n){if(t)if(t.checkCollision(s)){s.hp-=10;var r=new m(null,{posX:t.posX-20,posY:t.posY-10,velocityY:1},i.explosionImg);o[n]=null,a.tieExplodeSound.playIfNotMuted(),e.explosions.push(r)}else t.posY<850?t.draw():o[n]=null})),r.forEach((function(t,n){if(t.hp>0)t.draw(),t.sX<=3584?t.sX+=512:t.sX=0,t.sY<=3584?t.sY+=512:t.sY=0,t.hp-=1;else if(t.hp<=0){if(t.loot){var o=new ie(i.upgradeImg,e.loot,{posX:t.posX,posY:t.posY,velocityY:1});c.push(o)}r[n]=null}})),c.forEach((function(e,t){s.checkCollision(e)?(s.upgrade(),c[t]=null):e&&e.posY<850?e.drawUpgrade():c[t]=null})),l(),f()),g(60)})),Ye(xe(e),"ifWonOrLostStopGameAndPrintScore",(function(){e.player.hp<=0&&(e.lost=!0),!e.lost&&e.waveCount>=30&&(e.won=!0)})),Ye(xe(e),"clearGameAndUiCanvasForNextFramePainting",(function(){var t=xe(e),n=t.canvas,o=t.context,r=t.ui;o.clearRect(0,0,n.width,n.height),r.context.clearRect(0,0,n.width,n.height)})),Ye(xe(e),"keepDrawingBackgroundLayers",(function(){e.background.forEach((function(e){return e.draw()}))})),Ye(xe(e),"ifNotPausedAndAliveDrawPlayer",(function(){e.player.hp>0&&!e.paused&&e.player.draw()})),Ye(xe(e),"filterNulls",(function(){e.player.projectiles=e.player.projectiles.filter((function(e){return e})),e.enemyLasers=e.enemyLasers.filter((function(e){return e})),e.enemies=e.enemies.filter((function(e){return e})),e.explosions=e.explosions.filter((function(e){return e})),e.upgrades=e.upgrades.filter((function(e){return e}))})),Ye(xe(e),"graduallyIncreaseEnemySpeed",(function(){var t=xe(e),n=t.wave,o=t.waveCount,r=3;switch(n){case o>=10&&o<20:r=5;break;case o>=20&&o<29:r=6;break;case o>=29:r=20;break;case n>50:r=10}return r})),Ye(xe(e),"keyDownHandler",(function(t){var n=xe(e),o=n.sounds,r=n.won,i=n.lost,s=e.ui,a=s.playingStatus,c=s.notPlayingStatus;t.preventDefault(),e.playing||(e.playing=!0,e.background=e.images.background),"r"==t.key||"R"==t.key?(e.player=new ye(e.images.playerImg),e.restart()):"p"==t.key||"P"==t.key?r||i||(e.paused=!e.paused):"m"==t.key||"M"==t.key?o.muted?(a.classList.toggle("hidden"),c.classList.toggle("hidden"),o.backgroundMusic.play(),e.sounds.muted=!1):(c.classList.toggle("hidden"),a.classList.toggle("hidden"),o.backgroundMusic.pause(),e.sounds.muted=!0):"t"!=t.key&&"T"!=t.key||e.toggleBackground()})),Ye(xe(e),"pause",(function(){e.paused=!0})),Ye(xe(e),"play",(function(){e.paused=!1})),Ye(xe(e),"loopAnimationFramesAtDesiredFps",(function(t){setTimeout((function(){requestAnimationFrame(e.draw)}),1e3/t)})),Ye(xe(e),"restart",(function(){e.player=new ye(e.images.playerImg),e.score=0,e.wave=0,e.waveCount=0,e.lastWave=30,e.playing=!1,e.lost=!1,e.paused=!1,e.won=!1,e.enemies=[],e.enemyLasers=[],e.explosions=[],e.upgrades=[]})),Ye(xe(e),"setAssets",(function(){W.initialize(),e.sounds=W,e.images=new P,e.background=e.images.background,e.ui=new Q(xe(e)),e.fps=60,e.setCanvasResolution(),e.setKeyDownHandler()})),Ye(xe(e),"setCanvasResolution",(function(){var t=xe(e);e.images.playerImg.onload=function(){var e=t.canvas,n=this.naturalWidth,o=this.naturalHeight;e.width=n,e.height=o,(e=document.getElementById("ui-canvas")).width=n,e.height=o,t.draw()}})),Ye(xe(e),"setKeyDownHandler",(function(){document.addEventListener("keydown",e.keyDownHandler,!1)})),Ye(xe(e),"startNextWave",(function(){var t=xe(e),n=t.enemies,o=t.graduallyIncreaseEnemySpeed;if(0===n.length||n.every((function(e){return null===e}))){var r=o();e.wave+=5,e.waveCount+=1,e.enemies=ge(Array(e.wave).keys()).map((function(){return new $(e.images.tieFighterImg,{velocityY:Math.ceil(Math.random()*r)})}))}})),e.setAssets(),e.restart(),e}return t=i,(n=[{key:"toggleBackground",value:function(){0===this.background.length?this.background=this.images.background:this.background=[]}}])&&me(t.prototype,n),o&&me(t,o),i}(o);document.addEventListener("DOMContentLoaded",(function(){new je}))}]);
//# sourceMappingURL=main.js.map