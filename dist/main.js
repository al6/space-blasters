!function(e){var t={};function o(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=1)}([function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(0);var s=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("game-canvas"),this.context=this.canvas.getContext("2d")};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),e=a(this,l(t).call(this));var s={velocityX:0,velocityY:0,posX:0,posY:0},n=Object.assign({},s,o);return e.velocityX=n.velocityX,e.velocityY=n.velocityY,e.posX=n.posX,e.posY=n.posY,e}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),o=t,(s=[{key:"checkCollision",value:function(e){var t=e;switch(this.name){case"laser1":case"laser2":case"laser3":case"laser4":case"laser5":return!(!this||!t||this.posY>t.posY+t.height||this.posY<t.posY||this.posX+10<t.posX||this.posX>t.posX+t.width);case"red-laser":return!(!this||!t||this.posY>t.y+t.height||this.posY<t.y||this.posX+10<t.x||this.posX>t.x+t.width);case"player":return!(!this||!t||this.y>t.posY+t.height||this.y+this.height<t.posY||this.x+this.width<t.posX||this.x>t.posX+t.width)}}}])&&r(o.prototype,s),n&&r(o,n),t}(s);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,o,s){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,y(t).call(this,o))).name="explosion",n.hp=64,n.img=s,n.sX=0,n.sY=0,n.sWidth=512,n.sHeight=512,n.height=50,n.width=80,n.scale=5,n.loot=e,n}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),o=t,(s=[{key:"draw",value:function(){var e=this.context,t=this.img,o=this.sX,s=this.sY,n=this.sWidth,i=this.sHeight,r=this.posX,a=this.posY,l=this.height,c=this.width,u=this.scale;this.hp>0&&e.drawImage(t,o,s,n,i,r-170,a-100,c*u,l*u)}}])&&p(o.prototype,s),n&&p(o,n),t}(u);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e,o,s){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,m(t).call(this,s))).canvas=e,n.canvas.width=450,n.canvas.height=700,n.context=n.canvas.getContext("2d"),n.img=new Image,n.img.src="".concat(o),n}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),o=t,(s=[{key:"draw",value:function(){var e=this.canvas,t=this.context,o=this.img,s=this.posY,n=this.velocityY;this.posY+=n,t.clearRect(0,0,450,700),t.drawImage(o,0,-700+s),t.drawImage(o,0,s),s>=e.height?this.posY=0:s<-700&&(this.posY=1)}}])&&v(o.prototype,s),n&&v(o,n),t}(u);var Y=function(){for(var e=[],t=0;t<8;t++)e.push(t);return e.map((function(e){return function(e){var t={velocityY:0};switch(e){case 0:t.velocityY=.1;break;case 1:t.velocityY=.3;break;case 2:t.velocityY=.1;break;case 3:t.velocityY=1;break;case 4:t.velocityY=.05;break;case 5:t.velocityY=.1;break;case 6:t.velocityY=.5;break;case 7:t.velocityY=1}return new x(document.getElementById("l"+e),"./src/images/background_layers/"+e+".png",t)}(e)}))};var j=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.background=Y(),this.tieFighterImg=new Image,this.tieFighterImg.src="./src/images/tie-advanced.png",this.playerImg=new Image,this.playerImg.src="./src/images/xwing.png",this.upgradeImg=new Image,this.upgradeImg.src="./src/images/upgrades/upgrades1.png",this.explosionImg=new Image,this.explosionImg.src="./src/images/explosions/explosion_sprite_sheet.png"};function S(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var O=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,s;return t=e,(o=[{key:"initialize",value:function(){this.muted=!0,this.backgroundMusic=new Audio("./src/sounds/sw.mp3"),this.backgroundMusic.volume=.1,this.backgroundMusic.loop=!0,this.impact=new Audio("./src/sounds/impact.mp3"),this.impact.volume=.5,this.laserSound=new Audio("./src/sounds/Digital_SFX_Set/laser1.mp3"),this.enemyLaserSound=new Audio("./src/sounds/tie_fire_laser.mp3"),this.upgradeSound=new Audio("./src/sounds/upgrade_complete.mp3"),this.tieExplodeSound=new Audio("./src/sounds/tie_explode_short.mp3"),this.tieExplodeSound.volume=.2}}])&&S(t.prototype,o),s&&S(t,s),e}());function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e,o){var s,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(s=!(i=_(t).call(this,o))||"object"!==P(i)&&"function"!=typeof i?X(n):i).status="active",s.name=e,s.canvas=document.getElementById("game-canvas"),s.ctx=s.canvas.getContext("2d"),s.img=new Image;var r=X(s).img;switch(e){case"red-laser":r.src="./src/images/weapons/red_laser.png",s.hp=1;break;case"laser1":r.src="./src/images/weapons/laser1.png",s.hp=2;break;case"laser2":r.src="./src/images/weapons/laser2.png",s.hp=4;break;case"laser3":r.src="./src/images/weapons/laser3.png",s.hp=8;break;case"laser4":r.src="./src/images/weapons/laser4.png",s.hp=16;break;case"laser5":r.src="./src/images/weapons/laser5.png",s.hp=32}return s}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),o=t,(s=[{key:"draw",value:function(){var e=this.ctx,t=this.img,o=this.posX,s=this.posY;s+=this.velocityY,e.drawImage(t,o,s)}}])&&E(o.prototype,s),n&&E(o,n),t}(u);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function L(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(e,o,s){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=L(this,M(t).call(this,s))).canvas=document.getElementById("game-canvas"),n.ctx=n.canvas.getContext("2d"),n.sounds=o,n.name="TieFighter",n.weapon="red-laser",n.hp=5,n.loot=[{name:"upgrade",droprate:.04}],n.loot=n.loot[Math.floor(Math.random()*n.loot.length)];var i=Math.ceil(100*Math.random());return 100*n.loot.droprate>i?n.loot=n.loot.name:n.loot=null,n.img=e,n.posX=Math.floor(731*Math.random()),n.posY=Math.floor(-800*Math.random()),n.height=40,n.width=80,n.projectiles=[],n}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),o=t,(s=[{key:"draw",value:function(){var e=this.ctx,t=this.img,o=this.posX,s=this.posY,n=this.velocityY,i=this.height,r=this.width;e.drawImage(t,o,s,r,i),this.posY+=n}},{key:"fireWeapon",value:function(){var e;switch(this.sounds.muted||(this.sounds.enemyLaserSound.currentTime=0,this.sounds.enemyLaserSound.play()),this.weapon){case"red-laser":e=new C("red-laser",{velocityY:5,posX:Math.floor(this.posX+48),posY:Math.floor(this.posY-10)}),this.projectiles.push(e)}}}])&&A(o.prototype,s),n&&A(o,n),t}(u);function H(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.canvas=document.getElementById("ui-canvas"),this.context=this.canvas.getContext("2d"),this.playingStatus=document.getElementById("sound"),this.notPlayingStatus=document.getElementById("no-sound"),this.instructionsOpenButton=document.getElementById("instructions-modal-open-button"),this.instructionsModalBackground=document.getElementById("instructions-modal-background"),this.instructionsModalContent=document.getElementById("instructions-modal-content"),this.setInstructionsModal(),this.setToggleSoundOnClick()}var t,o,s;return t=e,(o=[{key:"setToggleSoundOnClick",value:function(){var e=this,t=this.playingStatus,o=this.notPlayingStatus;t.addEventListener("click",(function(){t.classList.toggle("hidden"),o.classList.toggle("hidden"),e.game.sounds.muted=!0,e.game.sounds.backgroundMusic.pause()})),o.addEventListener("click",(function(){t.classList.toggle("hidden"),o.classList.toggle("hidden"),e.game.sounds.muted=!1,e.game.sounds.backgroundMusic.play()}))}},{key:"setInstructionsModal",value:function(){var e=this.game,t=this.instructionsModalBackground,o=this.instructionsOpenButton,s=this.instructionsModalContent;t.addEventListener("click",(function(){e.play(),t.classList.toggle("hidden"),s.classList.toggle("hidden")})),o.addEventListener("click",(function(){e.pause(),t.classList.toggle("hidden"),s.classList.toggle("hidden")}))}},{key:"draw",value:function(e){this.drawCoolDownConstant(e.player.projectileCoolDownConstant),this.drawHP(e.player.hp),this.drawScore(e.score),this.drawWavesLeft(e.lastWave,e.waveCount)}},{key:"drawMuted",value:function(){var e=this.context;e.font="bold 30px Arial",e.fillStyle="red",e.fillText("MUTED! PRESS M TO UNMUTE",388,30)}},{key:"drawHP",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="red",t.fillText("HP: "+e,10,30)}},{key:"drawCoolDownConstant",value:function(e){var t=this.context;t.font="bold 20px Arial",t.fillStyle="white",t.fillText("Laser Cooldown: "+e,10,60)}},{key:"drawWavesLeft",value:function(e,t){var o=this.context;o.font="bold 20px Arial",o.fillStyle="white",o.fillText("Waves Remaining: "+(e-t),10,80)}},{key:"drawScore",value:function(e){var t=this.context;t.font="bold 30px Arial",t.fillStyle="white",t.fillText("Score: "+e,130,30)}},{key:"drawWin",value:function(e){var t=this.context;t.font="bold 80px Arial",t.fillStyle="green",t.fillText("YOU WIN!",230,280),t.font="bold 30px Arial",t.fillText("THE FORCE IS STRONG WITHIN YOU",150,330),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,155,410),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,470)}},{key:"drawLose",value:function(e){var t=this.context;t.font="bold 130px Arial",t.fillStyle="red",t.fillText("GAME OVER",10,250),t.font="bold 50px Arial",t.fillText("Your final score is: "+e,150,330),t.font="bold 50px Arial",t.fillText("PRESS R TO RESTART",150,400)}},{key:"drawPause",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="green",e.fillText("PAUSED",250,370),e.font="bold 50px Arial",e.fillText("PRESS P TO PLAY/PAUSE",110,420)}},{key:"drawReset",value:function(){var e=this.context;e.font="100px Arial",e.fillStyle="red",e.fillText("RESET",250,320)}}])&&H(t.prototype,o),s&&H(t,s),e}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function F(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(e,o,s){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=F(this,N(t).call(this,s))).name="upgrade",n.img=e,n.height=20,n.width=30,n.loot=o,n}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),o=t,(s=[{key:"drawUpgrade",value:function(){var e=this.context,t=this.img,o=this.posX,s=this.posY,n=this.velocityY,i=this.height,r=this.width;e.drawImage(t,o,s,r,i),this.posY+=n,t.onload=function(){e.drawImage(t,o,s,r,i)}}}])&&B(o.prototype,s),n&&B(o,n),t}(u);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function V(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=V(this,J(t).call(this))).name="player",o.weapon="laser1",o.img=e,o.sounds=O,o.restart(),o.setKeyAndTouchHandlers(),o}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),o=t,(s=[{key:"restart",value:function(){this.hp=100,this.height=100,this.width=100,this.x=400,this.y=765,this.projectiles=[],this.projectileCoolDown=0,this.projectileCoolDownConstant=10,this.spacePressed=!1,this.upPressed=!1,this.downPressed=!1,this.rightPressed=!1,this.leftPressed=!1}},{key:"setKeyAndTouchHandlers",value:function(){this.keyUpHandler=this.keyUpHandler.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this),this.touchHandler=this.touchHandler.bind(this),this.touchEndHandler=this.touchEndHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler,!1),document.addEventListener("keydown",this.keyDownHandler,!1),document.addEventListener("touchstart",this.touchHandler),document.addEventListener("touchend",this.touchEndHandler),document.addEventListener("touchmove",this.touchHandler)}},{key:"keyUpHandler",value:function(e){"Space"!=e.code&&"Space"!=e.key||(this.spacePressed=!1),"Right"!=e.key&&"ArrowRight"!=e.key||(this.rightPressed=!1),"Left"!=e.key&&"ArrowLeft"!=e.key||(this.leftPressed=!1),"Up"!=e.key&&"ArrowUp"!=e.key||(this.upPressed=!1),"Down"!=e.key&&"ArrowDown"!=e.key||(this.downPressed=!1)}},{key:"keyDownHandler",value:function(e){e.preventDefault(),"Space"==e.code&&(this.spacePressed=!0),"Right"!=e.key&&"ArrowRight"!=e.key||(this.rightPressed=!0),"Left"!=e.key&&"ArrowLeft"!=e.key||(this.leftPressed=!0),"Up"!=e.key&&"ArrowUp"!=e.key||(this.upPressed=!0),"Down"!=e.key&&"ArrowDown"!=e.key||(this.downPressed=!0)}},{key:"touchHandler",value:function(e){e.touches&&(this.spacePressed=!0,2.32*e.touches[0].pageX<this.x?this.leftPressed=!0:this.rightPressed=!0,1.45*e.touches[0].pageY<this.y?this.upPressed=!0:this.downPressed=!0),e.preventDefault()}},{key:"touchEndHandler",value:function(e){e.preventDefault(),this.leftPressed=!1,this.rightPressed=!1,this.upPressed=!1,this.downPressed=!1,this.spacePressed=!1}},{key:"draw",value:function(){var e=this.context,t=this.x,o=this.y,s=this.height,n=this.width;this.spacePressed&&this.fireWeapon(),this.leftPressed&&(this.x>0?this.x-=15:this.x=750),this.rightPressed&&(this.x<700?this.x+=15:this.x=-50),this.upPressed&&this.y>0&&(this.y-=10),this.downPressed&&this.y<755&&(this.y+=10),e.drawImage(this.img,t,o,s,n)}},{key:"fireWeapon",value:function(){var e,t,o;if(this.projectileCoolDown<=0)switch(this.projectileCoolDown+=this.projectileCoolDownConstant,this.sounds.muted||(this.sounds.laserSound.currentTime=0,this.sounds.laserSound.play()),this.weapon){case"laser1":e=new C("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-1}),this.projectiles.push(e);break;case"laser2":e=new C("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new C("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser3":e=new C("laser1",{velocityY:-10,posX:this.x,posY:this.y-10}),t=new C("laser1",{velocityY:-10,posX:this.x+43,posY:this.y-10}),o=new C("laser1",{velocityY:-10,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser4":e=new C("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser5":e=new C("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new C("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser6":e=new C("laser2",{velocityY:-8,posX:this.x,posY:this.y-10}),t=new C("laser2",{velocityY:-8,posX:this.x+43,posY:this.y-10}),o=new C("laser2",{velocityY:-8,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser7":e=new C("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser8":e=new C("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new C("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser9":e=new C("laser3",{velocityY:-6,posX:this.x,posY:this.y-10}),t=new C("laser3",{velocityY:-6,posX:this.x+43,posY:this.y-10}),o=new C("laser3",{velocityY:-6,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser10":e=new C("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser11":e=new C("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new C("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser12":e=new C("laser4",{velocityY:-4,posX:this.x,posY:this.y-10}),t=new C("laser4",{velocityY:-4,posX:this.x+43,posY:this.y-10}),o=new C("laser4",{velocityY:-4,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o);break;case"laser13":e=new C("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),this.projectiles.push(e);break;case"laser14":e=new C("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new C("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t);break;case"laser15":e=new C("laser5",{velocityY:-2,posX:this.x,posY:this.y-10}),t=new C("laser5",{velocityY:-2,posX:this.x+43,posY:this.y-10}),o=new C("laser5",{velocityY:-2,posX:this.x+90,posY:this.y-10}),this.projectiles.push(e),this.projectiles.push(t),this.projectiles.push(o)}else this.projectileCoolDown-=1}},{key:"upgrade",value:function(){var e=this.weapon,t=this.hp,o=this.projectileCoolDownConstant;switch(this.sounds.muted||(this.sounds.upgradeSound.currentTime=0,this.sounds.upgradeSound.play()),e){case"laser1":this.weapon="laser2";break;case"laser2":this.weapon="laser3";break;case"laser3":this.weapon="laser4";break;case"laser4":this.weapon="laser5";break;case"laser5":this.weapon="laser6";break;case"laser6":this.weapon="laser7";break;case"laser7":this.weapon="laser8";break;case"laser8":this.weapon="laser9";break;case"laser9":this.weapon="laser10";break;case"laser10":this.weapon="laser11";break;case"laser11":this.weapon="laser12";break;case"laser12":this.weapon="laser13";break;case"laser13":this.weapon="laser14";break;case"laser14":this.weapon="laser15";break;case"laser15":100===t?o>=5&&(this.projectileCoolDownConstant-=1):t<=90?this.hp+=10:t<=100&&(this.hp+=1)}}}])&&q(o.prototype,s),n&&q(o,n),t}(u);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function te(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oe(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=oe(this,se(t).call(this))).setAssets(),e.reset(),e.bindStuff(),e}var o,s,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),o=t,(s=[{key:"draw",value:function(){var e=this,t=this.checkCollision,o=this.clear,s=this.enemies,n=this.enemyLasers,i=this.explosions,r=this.images,a=this.lost,l=this.paused,c=this.player,u=this.score,h=this.sounds,p=this.upgrades,f=this.waveCount,y=this.won,d=this.ui;if(o(),!this.paused&&!this.lost&&!this.won&&(this.images.background.forEach((function(e){return e.draw()})),c.hp>0?c.draw():this.lost=!0,c.projectiles.forEach((function(o,n){if(o&&o.posY>=-5){var a=!1;s.forEach((function(l,u){if(l)if(t(o,l)){if(h.muted||h.impact.play(),l.hp-=1,o.hp-=1,o.hp<=0&&(c.projectiles[n]=null),l.hp<=0){var p=null;switch(l.name){case"TieFighter":p=new w(l.loot,{posX:l.posX,posY:l.posY,velocityY:1},r.explosionImg),h.muted||(h.tieExplodeSound.currentTime=0,h.tieExplodeSound.play()),i.push(p),e.score+=1}s[u]=null}}else a||(o.posY+=o.velocityY,o.draw(),a=!0)}))}else c.projectiles[n]=null})),s.forEach((function(e,t){e&&(e.posY>=850?s[t]=null:(e.draw(),1===Math.ceil(1e3*Math.random())&&(e.fireWeapon(),n.push(e.projectiles[e.projectiles.length-1]))))})),n.forEach((function(o){if(t(o,c)){n.splice(n.indexOf(o),1),c.hp-=10;var s=new w(null,{posX:o.posX-20,posY:o.posY-10,velocityY:1},r.explosionImg);h.muted||(h.tieExplodeSound.currentTime=0,h.tieExplodeSound.play()),e.explosions.push(s)}else o.posY<850?(o.draw(),o.posY+=o.velocityY):n.splice(n.indexOf(o),1)})),i.forEach((function(t){if(t.hp>0)t.draw(),t.sX<=3584?t.sX+=512:t.sX=0,t.sY<=3584?t.sY+=512:t.sY=0,t.hp-=1;else if(t.hp<=0){if(t.loot){var o=new G(r.upgradeImg,e.loot,{posX:t.posX,posY:t.posY,velocityY:1});p.push(o)}i.splice(i.indexOf(t),1)}})),p.forEach((function(e){t(c,e)?(c.upgrade(),p.splice(p.indexOf(e),1)):e&&e.posY<850?e.drawUpgrade():p.splice(p.indexOf(e),1)})),0===s.length||s.every((function(e){return null===e})))){var b=3;switch(this.wave){case this.waveCount>=10&&this.waveCount<20:b=5;break;case this.waveCount>=20&&this.waveCount<29:b=6;break;case this.waveCount>=29:b=20,this.wave+=20;break;case this.wave>50:b=10}this.wave+=5,this.waveCount+=1,this.enemies=ee(Array(this.wave).keys()).map((function(){return new D(r.tieFighterImg,h,{velocityY:Math.ceil(Math.random()*b)})}))}d.draw(this),f>=30&&(this.won=!0),y&&d.drawWin(u),a&&d.drawLose(u),!l||a||y||d.drawPause(),h.muted&&d.drawMuted(),requestAnimationFrame(this.draw)}},{key:"clear",value:function(){var e=this.canvas,t=this.context,o=this.ui;t.clearRect(0,0,e.width,e.height),o.context.clearRect(0,0,e.width,e.height)}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"setAssets",value:function(){O.initialize(),this.images=new j,this.sounds=O,this.ui=new U(this),this.setCanvasResolution()}},{key:"setCanvasResolution",value:function(){var e=this;this.images.playerImg.onload=function(){var t=e.canvas,o=this.naturalWidth,s=this.naturalHeight;t.width=o,t.height=s,(t=document.getElementById("ui-canvas")).width=o,t.height=s,e.draw()}}},{key:"bindStuff",value:function(){this.clear=this.clear.bind(this),this.draw=this.draw.bind(this),this.checkCollision=this.checkCollision.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler,!1)}},{key:"reset",value:function(){this.player=new Z(this.images.playerImg),this.score=0,this.wave=0,this.waveCount=0,this.lastWave=30,this.lost=!1,this.paused=!1,this.won=!1,this.enemies=[],this.enemyLasers=[],this.explosions=[],this.upgrades=[]}},{key:"checkCollision",value:function(e,t){switch(e.name){case"laser1":case"laser2":case"laser3":case"laser4":case"laser5":return!(!e||!t||e.posY>t.posY+t.height||e.posY<t.posY||e.posX+10<t.posX||e.posX>t.posX+t.width);case"red-laser":return!(!e||!t||e.posY>t.y+t.height||e.posY<t.y||e.posX+10<t.x||e.posX>t.x+t.width);case"player":return!(!e||!t||e.y>t.posY+t.height||e.y+e.height<t.posY||e.x+e.width<t.posX||e.x>t.posX+t.width)}}},{key:"keyDownHandler",value:function(e){var t=this.sounds,o=this.won,s=(this.paused,this.lost),n=this.ui,i=n.playingStatus,r=n.notPlayingStatus;e.preventDefault(),"r"==e.key||"R"==e.key?(this.player=new Z(this.images.playerImg),this.reset()):"p"==e.key||"P"==e.key?o||s||(this.paused=!this.paused):"m"!=e.key&&"M"!=e.key||(t.muted?(i.classList.toggle("hidden"),r.classList.toggle("hidden"),t.backgroundMusic.play(),this.sounds.muted=!1):(r.classList.toggle("hidden"),i.classList.toggle("hidden"),t.backgroundMusic.pause(),this.sounds.muted=!0))}}])&&te(o.prototype,s),n&&te(o,n),t}(s);document.addEventListener("DOMContentLoaded",(function(){new ie}))}]);
//# sourceMappingURL=main.js.map